<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>sanscar - Notebook</title>

        <!-- Libs for Icons, Math, Markdown, and Code Highlighting -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.min.css"
        />
        <script
            defer
            src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js"
        ></script>
        <script
            defer
            src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"
        ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.2.12/marked.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Lora:ital,wght@0,400;0,500;1,400&display=swap"
            rel="stylesheet"
        />

        <style>
            :root {
                --bg-color: #f8f5f2; /* Creamy white for the page */
                --text-color: #3d3d3d; /* Dark gray for text */
                --accent-color: #005a9c; /* A calm, deep blue */
                --border-color: #eaeaea;
                --secondary-text-color: #777;
                --code-bg-color: #f6f8fa;
                --font-sans: "Inter", sans-serif;
                --font-serif: "Lora", serif;
            }

            /* --- Basic Setup & Typography --- */
            html {
                scroll-behavior: smooth;
            }
            body {
                font-family: var(--font-serif);
                background-color: #f6f2eb;
                color: var(--text-color);
                margin: 0;
                min-height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 2.4rem;
                line-height: 1.7;
                position: relative;
                overflow: hidden;
            }
            body::before {
                content: "";
                position: absolute;
                inset: 0;
                background-image:
                    repeating-linear-gradient(
                        105deg,
                        rgba(24, 34, 46, 0.035),
                        rgba(24, 34, 46, 0.035) 1px,
                        transparent 1px,
                        transparent 16px
                    ),
                    repeating-linear-gradient(
                        -75deg,
                        rgba(24, 34, 46, 0.02),
                        rgba(24, 34, 46, 0.02) 2px,
                        transparent 2px,
                        transparent 18px
                    );
                opacity: 0.5;
                pointer-events: none;
            }
            .container {
                display: flex;
                width: 100%;
                max-width: min(1650px, 95vw);
                min-height: min(900px, 88vh);
                aspect-ratio: 16 / 9;
                background-color: var(--bg-color);
                border-radius: 28px;
                border: 1px solid rgba(0, 0, 0, 0.08);
                box-shadow: 0 25px 80px rgba(0, 0, 0, 0.14);
                position: relative;
                overflow: hidden;
            }
            .container::before {
                content: "";
                position: absolute;
                inset: 0;
                background-image: repeating-linear-gradient(
                    90deg,
                    rgba(24, 34, 46, 0.03),
                    rgba(24, 34, 46, 0.03) 1px,
                    transparent 1px,
                    transparent 22px
                );
                opacity: 0.32;
                pointer-events: none;
            }
            .container::after {
                content: "";
                position: absolute;
                inset: 20px;
                border: 1px dashed rgba(24, 34, 46, 0.04);
                border-radius: 20px;
                pointer-events: none;
            }
            h1,
            h2,
            h3 {
                font-family: var(--font-sans);
                font-weight: 700;
                color: var(--text-color);
                margin-top: 2.5rem;
                margin-bottom: 1.5rem;
                letter-spacing: -0.5px;
            }
            a {
                color: var(--accent-color);
                text-decoration: none;
                transition: opacity 0.2s ease;
            }
            a:hover {
                opacity: 0.8;
            }
            hr {
                border: none;
                height: 2px;
                margin: 3rem 0;
                background-image: repeating-linear-gradient(
                    90deg,
                    rgba(0, 0, 0, 0.06),
                    rgba(0, 0, 0, 0.06) 6px,
                    transparent 6px,
                    transparent 16px
                );
            }

            /* --- Layout: Table of Contents (Left) & Content (Right) --- */
            .table-of-contents {
                width: 300px;
                padding: 2.5rem;
                border-right: 1px solid rgba(0, 0, 0, 0.08);
                position: sticky;
                top: 0;
                max-height: 100%;
                overflow-y: auto;
                flex-shrink: 0;
                background: rgba(248, 245, 242, 0.92);
                backdrop-filter: blur(6px);
            }
            .table-of-contents h1 {
                font-size: 1.5rem;
                margin-top: 0;
            }
            .table-of-contents .subtitle {
                font-family: var(--font-sans);
                font-size: 0.9rem;
                color: var(--secondary-text-color);
                margin-top: -1rem;
                margin-bottom: 2rem;
            }
            .toc-nav ul,
            .social-links ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }
            .toc-nav li a {
                display: block;
                padding: 0.6rem 0;
                font-family: var(--font-sans);
                font-weight: 500;
                color: var(--text-color);
                font-size: 0.95rem;
                transition: color 0.2s ease;
            }
            .toc-nav li a:hover {
                color: var(--accent-color);
            }
            .social-links {
                margin-top: 2rem;
            }
            .social-links li a {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                padding: 0.5rem 0;
                font-family: var(--font-sans);
                font-size: 0.9rem;
                color: var(--secondary-text-color);
            }

            main.content {
                flex-grow: 1;
                padding: 2rem 4rem 3rem 4rem;
                overflow-y: auto;
                background: rgba(255, 255, 255, 0.72);
                backdrop-filter: blur(8px);
            }
            main.content section {
                padding: 2rem;
                margin-bottom: 2rem;
                background: #fff;
                background-image:
                    radial-gradient(
                        rgba(24, 34, 46, 0.04) 1px,
                        transparent 1px
                    ),
                    radial-gradient(
                        rgba(24, 34, 46, 0.018) 1px,
                        transparent 1px
                    );
                background-size:
                    18px 18px,
                    38px 38px;
                background-position:
                    0 0,
                    10px 10px;
                border: 1px solid rgba(24, 34, 46, 0.05);
                border-radius: 18px;
                position: relative;
                overflow: hidden;
            }
            main.content section::before {
                content: "";
                position: absolute;
                inset: 10px;
                border: 1px dashed rgba(0, 0, 0, 0.05);
                border-radius: 14px;
                pointer-events: none;
            }
            main.content section > * {
                position: relative;
                z-index: 1;
            }

            /* --- Blog Post Styling --- */
            .blog-post {
                border: 1px solid rgba(0, 0, 0, 0.06);
                padding: 1.75rem;
                margin-bottom: 2rem;
                border-radius: 16px;
                background: linear-gradient(135deg, #ffffff 0%, #f9f6f1 100%);
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
            }
            .blog-post:last-child {
                margin-bottom: 0;
            }
            .blog-post .title {
                font-family: var(--font-sans);
                font-size: 1.5rem;
                font-weight: 700;
                margin: 0 0 0.25rem 0;
            }
            .blog-post .date {
                font-family: var(--font-sans);
                font-size: 0.85rem;
                color: var(--secondary-text-color);
                margin-bottom: 1rem;
            }
            .blog-post-content.hidden {
                display: none;
            }
            .expand-button {
                background: none;
                border: 1px solid var(--border-color);
                color: var(--secondary-text-color);
                padding: 0.5rem 1rem;
                font-family: var(--font-sans);
                font-size: 0.8rem;
                cursor: pointer;
                border-radius: 4px;
                margin-top: 1rem;
                transition: all 0.2s ease;
            }
            .expand-button:hover {
                border-color: var(--accent-color);
                color: var(--accent-color);
            }

            /* --- Learning Entries Styling --- */
            #learnings-container {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1.5rem;
            }
            .learning-entry {
                background-color: #fff;
                border: 1px solid rgba(0, 0, 0, 0.08);
                padding: 1.75rem;
                border-radius: 16px;
                background-image: repeating-linear-gradient(
                    120deg,
                    rgba(0, 0, 0, 0.028),
                    rgba(0, 0, 0, 0.028) 1px,
                    transparent 1px,
                    transparent 10px
                );
                box-shadow: 0 12px 24px rgba(0, 0, 0, 0.06);
            }
            .learning-entry h3 {
                font-size: 1rem;
                margin: 0 0 1rem 0;
                border-bottom: 1px solid var(--border-color);
                padding-bottom: 0.75rem;
            }
            .learning-entry ul {
                list-style: none;
                padding: 0;
                margin: 0;
                font-size: 0.9rem;
            }
            .learning-entry li {
                padding-bottom: 0.5rem;
            }

            /* --- General Content Styling (for Markdown) --- */
            .blog-post-content h1,
            .blog-post-content h2,
            .blog-post-content h3 {
                margin-top: 2rem;
            }
            .blog-post-content p {
                margin-bottom: 1rem;
            }
            .blog-post-content pre {
                background-color: var(--code-bg-color);
                padding: 1rem;
                border-radius: 6px;
                overflow-x: auto;
                border: 1px solid var(--border-color);
            }
            .blog-post-content code {
                font-family: "SF Mono", "Fira Code", "Consolas", monospace;
                font-size: 0.9em;
            }
            .blog-post-content pre code {
                background: none;
                padding: 0;
            }
            .blog-post-content :not(pre) > code {
                background-color: var(--code-bg-color);
                padding: 0.2em 0.4em;
                border-radius: 3px;
            }
            .blog-post-content blockquote {
                border-left: 3px solid var(--accent-color);
                padding-left: 1.5rem;
                margin-left: 0;
                color: var(--secondary-text-color);
                font-style: italic;
            }
            .blog-post-content img {
                max-width: 100%;
                border-radius: 6px;
            }

            /* --- Benchmarks Section --- */
            #benchmarks {
                background-color: #fff;
                border: 1px solid rgba(24, 34, 46, 0.06);
                border-radius: 20px;
                padding: 2.25rem;
                box-shadow: 0 18px 40px rgba(0, 0, 0, 0.07);
                background-image: repeating-linear-gradient(
                    60deg,
                    rgba(24, 34, 46, 0.02),
                    rgba(24, 34, 46, 0.02) 1px,
                    transparent 1px,
                    transparent 14px
                );
            }
            .benchmarks-description {
                font-family: var(--font-sans);
                font-size: 0.95rem;
                color: var(--secondary-text-color);
                margin-top: 0.5rem;
                margin-bottom: 0.5rem;
            }
            .benchmarks-footnote {
                font-size: 0.8rem;
                margin-top: 0.75rem;
            }
            .benchmarks-axis {
                display: flex;
                justify-content: space-between;
                font-family: var(--font-sans);
                font-size: 0.8rem;
                color: var(--secondary-text-color);
                margin: 1.2rem 0 0.75rem 0;
                padding: 0.6rem 0.85rem 1.1rem;
                position: relative;
                border: 1px solid rgba(24, 34, 46, 0.05);
                border-radius: 16px;
                background: rgba(255, 255, 255, 0.65);
                letter-spacing: 0.02em;
                overflow: hidden;
                z-index: 0;
            }
            .benchmarks-axis::before {
                content: "";
                position: absolute;
                left: 8%;
                right: 8%;
                bottom: 0.75rem;
                height: 1px;
                background-image: repeating-linear-gradient(
                    90deg,
                    rgba(24, 34, 46, 0.22),
                    rgba(24, 34, 46, 0.22) 6px,
                    transparent 6px,
                    transparent 18px
                );
                opacity: 0.5;
            }
            .benchmarks-axis::after {
                content: "";
                position: absolute;
                left: 8%;
                right: 8%;
                top: 0.65rem;
                bottom: 0.75rem;
                background-image: repeating-linear-gradient(
                    90deg,
                    transparent 0,
                    transparent calc(25% - 1px),
                    rgba(24, 34, 46, 0.12) calc(25% - 1px),
                    rgba(24, 34, 46, 0.12) 25%
                );
                pointer-events: none;
                opacity: 0.35;
            }
            .benchmarks-axis span {
                position: relative;
                z-index: 1;
            }
            #benchmarks-chart {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }
            .benchmark-row {
                display: grid;
                grid-template-columns: minmax(220px, 0.35fr) 1fr;
                gap: 1.5rem;
                align-items: center;
            }
            .model-info {
                font-family: var(--font-sans);
            }
            .model-name {
                font-weight: 600;
                font-size: 1rem;
            }
            .model-meta {
                font-size: 0.85rem;
                color: var(--secondary-text-color);
                margin-top: 0.35rem;
            }
            .bar-track {
                position: relative;
                height: 32px;
                border-radius: 999px;
                background-color: rgba(0, 0, 0, 0.04);
                border: 1px solid rgba(0, 0, 0, 0.05);
                overflow: hidden;
                background-image: linear-gradient(
                    90deg,
                    rgba(0, 0, 0, 0.08) 1px,
                    transparent 1px
                );
                background-size: 25% 100%;
            }
            .bar-fill {
                height: 100%;
                border-radius: 999px;
                transition: width 0.6s ease;
            }
            .bar-value {
                position: absolute;
                top: 50%;
                right: 1rem;
                transform: translateY(-50%);
                font-family: var(--font-sans);
                font-weight: 600;
                font-size: 0.85rem;
                color: var(--text-color);
            }

            /* --- Responsive Design --- */
            @media (max-width: 1024px) {
                body {
                    padding: 1.25rem;
                }
                .container {
                    max-width: 100%;
                    min-height: auto;
                    aspect-ratio: auto;
                    border-radius: 20px;
                }
                .table-of-contents {
                    width: 240px;
                    padding: 2rem;
                }
                main.content {
                    padding: 1.5rem 2.5rem 2.5rem 2.5rem;
                }
            }
            @media (max-width: 768px) {
                body {
                    padding: 0;
                }
                .container {
                    flex-direction: column;
                    box-shadow: none;
                    aspect-ratio: auto;
                    border-radius: 0;
                    min-height: 100vh;
                }
                .table-of-contents {
                    position: static;
                    width: 100%;
                    height: auto;
                    border-right: none;
                    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
                    padding: 1.5rem;
                    backdrop-filter: none;
                }
                main.content {
                    padding: 1rem 1.5rem 2rem 1.5rem;
                    background: transparent;
                }
                main.content section {
                    padding: 1.5rem;
                }
                .benchmark-row {
                    grid-template-columns: 1fr;
                    gap: 1rem;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <!-- Left Column: Table of Contents -->
            <aside class="table-of-contents">
                <h1>sanscar's notebook</h1>
                <p class="subtitle">ml researcher / engineer</p>
                <nav class="toc-nav">
                    <ul>
                        <li><a href="#about">About</a></li>
                        <li><a href="#projects">Projects</a></li>
                        <li><a href="#blog">Blog</a></li>
                        <li><a href="#benchmarks">Benchmarks</a></li>
                        <li><a href="#learnings">Learnings</a></li>
                        <li><a href="#recommended">Recommended</a></li>
                    </ul>
                </nav>
                <nav class="social-links">
                    <ul>
                        <li>
                            <a
                                href="https://www.linkedin.com/in/sanskarshrivastava/"
                                target="_blank"
                                ><i class="fab fa-linkedin fa-fw"></i>
                                LinkedIn</a
                            >
                        </li>
                        <li>
                            <a
                                href="https://github.com/SanskarX10"
                                target="_blank"
                                ><i class="fab fa-github fa-fw"></i> GitHub</a
                            >
                        </li>
                        <li>
                            <a href="/resume.pdf" download
                                ><i class="fas fa-file-alt fa-fw"></i> Resume</a
                            >
                        </li>
                    </ul>
                </nav>
            </aside>

            <!-- Right Column: Main Content -->
            <main class="content">
                <section id="about">
                    <h2><i class="fas fa-user-circle"></i> About Me</h2>
                    <p>
                        you can call me sanskar, a passionate ml researcher,
                        currently ml engineer @ ****** (maritime ai startup). I
                        created this space to document my learnings, distill
                        complex topics, and share my work.
                    </p>
                </section>

                <hr />

                <section id="projects">
                    <h2><i class="fas fa-flask"></i> Things I'm Working On</h2>
                    <ul>
                        <li>A custom linear algebra framework from scratch.</li>
                        <li>
                            Researching optimal hybrid search techniques for
                            retrieval.
                        </li>
                        <li>
                            Building pipelines for efficient synthetic data
                            creation.
                        </li>
                        <li>
                            Developing a custom embedding model for
                            physics-based data.
                        </li>
                    </ul>
                </section>

                <hr />

                <section id="blog">
                    <h2><i class="fas fa-feather-alt"></i> Blog Posts</h2>
                    <div id="blog-posts-container"></div>
                </section>

                <hr />

                <section id="benchmarks">
                    <h2><i class="fas fa-chart-bar"></i> Benchmarks</h2>
                    <p class="benchmarks-description">
                        First benchmark: NYT Strands Bench. Models only receive
                        the Strands hint and must recover every answer word
                        sight unseen, so accuracy reflects how many puzzles they
                        fully solve.
                    </p>
                    <div class="benchmarks-axis">
                        <span>0%</span>
                        <span>25%</span>
                        <span>50%</span>
                        <span>75%</span>
                        <span>100%</span>
                    </div>
                    <div id="benchmarks-chart"></div>
                    <p class="benchmarks-description benchmarks-footnote">
                        Accuracy = solved puzzles รท 138 total. Bars use pastel
                        hues; identical labs share colors.
                    </p>
                </section>

                <hr />

                <section id="learnings">
                    <h2>
                        <i class="fas fa-brain"></i> Shards of my
                        brain.safetensors
                    </h2>
                    <p>
                        A log of daily learnings, discoveries, and moments of
                        clarity.
                    </p>
                    <div id="learnings-container"></div>
                </section>

                <hr />

                <section id="recommended">
                    <h2>
                        <i class="fas fa-book-open"></i> Recommended Reading &
                        Vids
                    </h2>
                    <div id="recommended-container"></div>
                </section>

                <div
                    id="error-message"
                    style="
                        display: none;
                        background-color: #ffcccc;
                        border: 1px solid #ff0000;
                        color: #ff0000;
                        padding: 10px;
                        margin-top: 10px;
                        border-radius: 6px;
                    "
                ></div>
            </main>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const blogContainer = document.getElementById(
                    "blog-posts-container",
                );
                const learningsContainer = document.getElementById(
                    "learnings-container",
                );
                const recommendedContainer = document.getElementById(
                    "recommended-container",
                );
                const benchmarksChart =
                    document.getElementById("benchmarks-chart");
                const errorMessageDiv =
                    document.getElementById("error-message");

                const benchmarkData = [
                    {
                        model: "google/gemini-3-pro-preview-high",
                        lab: "Google",
                        solved: 98,
                        total: 138,
                        percentage: 71.01,
                    },
                    {
                        model: "x-ai/grok-4.1-fast",
                        lab: "xAI",
                        solved: 85,
                        total: 138,
                        percentage: 61.59,
                    },
                    {
                        model: "openai/gpt-5.1-high",
                        lab: "OpenAI",
                        solved: 84,
                        total: 138,
                        percentage: 60.87,
                    },
                    {
                        model: "openai/gpt-5-low",
                        lab: "OpenAI",
                        solved: 58,
                        total: 138,
                        percentage: 42.03,
                    },
                    {
                        model: "google/gemini-2.5-pro",
                        lab: "Google",
                        solved: 40,
                        total: 138,
                        percentage: 28.99,
                    },
                    {
                        model: "openai/gpt-5.1-low",
                        lab: "OpenAI",
                        solved: 38,
                        total: 138,
                        percentage: 27.54,
                    },
                    {
                        model: "anthropic/claude-sonnet-4",
                        lab: "Anthropic",
                        solved: 32,
                        total: 138,
                        percentage: 23.19,
                    },
                    {
                        model: "anthropic/claude-3.7-sonnet",
                        lab: "Anthropic",
                        solved: 25,
                        total: 138,
                        percentage: 18.12,
                    },
                    {
                        model: "openai/gpt-5-mini-low",
                        lab: "OpenAI",
                        solved: 23,
                        total: 138,
                        percentage: 16.67,
                    },
                    {
                        model: "google/gemini-2.5-flash-preview-09-2025",
                        lab: "Google",
                        solved: 23,
                        total: 138,
                        percentage: 16.67,
                    },
                    {
                        model: "mistralai/mistral-medium-3.1",
                        lab: "Mistral AI",
                        solved: 21,
                        total: 138,
                        percentage: 15.22,
                    },
                    {
                        model: "openai/chatgpt-4o-latest",
                        lab: "OpenAI",
                        solved: 20,
                        total: 138,
                        percentage: 14.49,
                    },
                    {
                        model: "moonshotai/kimi-k2-0905",
                        lab: "Moonshot AI",
                        solved: 19,
                        total: 138,
                        percentage: 13.77,
                    },
                    {
                        model: "openai/gpt-4.1",
                        lab: "OpenAI",
                        solved: 17,
                        total: 138,
                        percentage: 12.32,
                    },
                    {
                        model: "deepseek/deepseek-v3.2-exp",
                        lab: "DeepSeek",
                        solved: 16,
                        total: 138,
                        percentage: 11.59,
                    },
                    {
                        model: "qwen/qwen3-max",
                        lab: "Qwen",
                        solved: 15,
                        total: 138,
                        percentage: 10.87,
                    },
                    {
                        model: "openai/gpt-4.1-mini",
                        lab: "OpenAI",
                        solved: 13,
                        total: 138,
                        percentage: 9.42,
                    },
                    {
                        model: "openai/gpt-oss-120b",
                        lab: "OpenAI",
                        solved: 13,
                        total: 138,
                        percentage: 9.42,
                    },
                    {
                        model: "qwen/qwen3-coder-plus",
                        lab: "Qwen",
                        solved: 12,
                        total: 138,
                        percentage: 8.7,
                    },
                    {
                        model: "meta-llama/llama-4-maverick",
                        lab: "Meta",
                        solved: 10,
                        total: 138,
                        percentage: 7.25,
                    },
                    {
                        model: "z-ai/glm-4-32b",
                        lab: "Zhipu AI",
                        solved: 9,
                        total: 138,
                        percentage: 6.52,
                    },
                    {
                        model: "nousresearch/hermes-4-70b",
                        lab: "Nous Research",
                        solved: 8,
                        total: 138,
                        percentage: 5.8,
                    },
                    {
                        model: "openai/gpt-5-nano-low",
                        lab: "OpenAI",
                        solved: 6,
                        total: 138,
                        percentage: 4.35,
                    },
                    {
                        model: "openai/gpt-oss-20b",
                        lab: "OpenAI",
                        solved: 5,
                        total: 138,
                        percentage: 3.62,
                    },
                    {
                        model: "qwen/qwen3-coder-30b-a3b-instruct",
                        lab: "Qwen",
                        solved: 4,
                        total: 138,
                        percentage: 2.9,
                    },
                    {
                        model: "openai/gpt-4.1-nano",
                        lab: "OpenAI",
                        solved: 4,
                        total: 138,
                        percentage: 2.9,
                    },
                    {
                        model: "allenai/olmo-3-7b-instruct",
                        lab: "Allen Institute",
                        solved: 3,
                        total: 138,
                        percentage: 2.17,
                    },
                    {
                        model: "meta-llama/llama-4-scout",
                        lab: "Meta",
                        solved: 3,
                        total: 138,
                        percentage: 2.17,
                    },
                    {
                        model: "nousresearch/deephermes-3-mistral-24b-preview",
                        lab: "Nous Research",
                        solved: 0,
                        total: 138,
                        percentage: 0,
                    },
                ];

                const labPalette = {
                    Google: "#D7E9FF",
                    xAI: "#F8D8FF",
                    OpenAI: "#FFE7C7",
                    Anthropic: "#DDEDEA",
                    "Mistral AI": "#F9D9D0",
                    "Moonshot AI": "#FFF0C9",
                    DeepSeek: "#E4D7FF",
                    Qwen: "#FFDCE8",
                    Meta: "#D9F3E5",
                    "Zhipu AI": "#EDE3FF",
                    "Nous Research": "#F3E1D8",
                    "Allen Institute": "#D6EFE2",
                };

                const renderBenchmarks = () => {
                    if (!benchmarksChart) return;

                    benchmarkData.forEach((entry) => {
                        const row = document.createElement("div");
                        row.className = "benchmark-row";

                        const info = document.createElement("div");
                        info.className = "model-info";
                        info.innerHTML = `
                        <div class="model-name">${entry.model}</div>
                        <div class="model-meta">${entry.lab} โข ${entry.solved}/${entry.total} solved</div>
                    `;

                        const barTrack = document.createElement("div");
                        barTrack.className = "bar-track";
                        barTrack.setAttribute("role", "img");
                        barTrack.setAttribute(
                            "aria-label",
                            `${entry.model} accuracy ${entry.percentage.toFixed(2)} percent`,
                        );

                        const barFill = document.createElement("div");
                        barFill.className = "bar-fill";
                        barFill.style.width = `${entry.percentage}%`;
                        barFill.style.backgroundColor =
                            labPalette[entry.lab] || "#D8D8D8";

                        const barValue = document.createElement("span");
                        barValue.className = "bar-value";
                        barValue.textContent = `${entry.percentage.toFixed(2)}%`;

                        barTrack.appendChild(barFill);
                        barTrack.appendChild(barValue);

                        row.appendChild(info);
                        row.appendChild(barTrack);

                        benchmarksChart.appendChild(row);
                    });
                };

                // --- Configuration for Libraries ---
                marked.setOptions({
                    highlight: (code, lang) => {
                        const language = hljs.getLanguage(lang)
                            ? lang
                            : "plaintext";
                        return hljs.highlight(code, { language }).value;
                    },
                });

                const katexOptions = {
                    delimiters: [
                        { left: "$$", right: "$$", display: true },
                        { left: "$", right: "$", display: false },
                        { left: "\\(", right: "\\)", display: false },
                        { left: "\\[", right: "\\]", display: true },
                    ],
                    throwOnError: false, // Prevents one error from stopping all rendering
                };

                const showError = (message) => {
                    errorMessageDiv.textContent = message;
                    errorMessageDiv.style.display = "block";
                    console.error(message);
                };

                // --- Data Fetching and Rendering ---

                // 1. Load Blog Posts
                const loadBlogPosts = async () => {
                    try {
                        const res = await fetch("blog.json");
                        if (!res.ok)
                            throw new Error(
                                `HTTP error! status: ${res.status}`,
                            );
                        const posts = await res.json();

                        if (!posts || posts.length === 0) {
                            blogContainer.innerHTML =
                                "<p>No blog posts found.</p>";
                            return;
                        }

                        const postPromises = posts.map(async (post) => {
                            const mdRes = await fetch(post.file);
                            if (!mdRes.ok)
                                throw new Error(`Failed to load ${post.file}`);
                            const md = await mdRes.text();
                            return { ...post, md };
                        });

                        const postsWithContent =
                            await Promise.all(postPromises);

                        postsWithContent.forEach((post) => {
                            const postEl = document.createElement("div");
                            postEl.className = "blog-post";

                            const fullHtml = marked.parse(post.md);

                            postEl.innerHTML = `
                            <h3 class="title">${post.title}</h3>
                            <div class="date">${post.date}</div>
                            <div class="blog-post-content hidden">${fullHtml}</div>
                            <button class="expand-button">Read Post</button>
                        `;

                            blogContainer.appendChild(postEl);

                            const button =
                                postEl.querySelector(".expand-button");
                            const content =
                                postEl.querySelector(".blog-post-content");

                            button.addEventListener("click", () => {
                                const isHidden =
                                    content.classList.toggle("hidden");
                                button.textContent = isHidden
                                    ? "Read Post"
                                    : "Show Less";

                                // Render math/code ONLY when first expanded
                                if (!isHidden && !content.dataset.rendered) {
                                    renderMathInElement(content, katexOptions);
                                    content
                                        .querySelectorAll("pre code")
                                        .forEach((el) =>
                                            hljs.highlightElement(el),
                                        );
                                    content.dataset.rendered = "true";
                                }
                            });
                        });
                    } catch (error) {
                        showError(`Error loading blog posts: ${error.message}`);
                    }
                };

                // 2. Load Learning Entries
                const loadLearnings = async () => {
                    try {
                        const res = await fetch("entries.json");
                        if (!res.ok)
                            throw new Error(
                                `HTTP error! status: ${res.status}`,
                            );
                        const entries = await res.json();

                        if (!entries || entries.length === 0) {
                            learningsContainer.innerHTML =
                                "<p>No learning entries yet.</p>";
                            return;
                        }

                        entries.reverse().forEach((entry) => {
                            // Show most recent first
                            const entryEl = document.createElement("div");
                            entryEl.className = "learning-entry";

                            const learningItems = entry.learning
                                .map((item) => `<li>${item}</li>`)
                                .join("");

                            entryEl.innerHTML = `
                            <h3>${entry.date}</h3>
                            <ul>${learningItems}</ul>
                        `;
                            learningsContainer.appendChild(entryEl);
                        });
                    } catch (error) {
                        showError(
                            `Error loading learning entries: ${error.message}`,
                        );
                    }
                };

                // 3. Load Recommendations
                const loadRecommendations = async () => {
                    try {
                        const res = await fetch("recommended.json");
                        if (!res.ok)
                            throw new Error(
                                `HTTP error! status: ${res.status}`,
                            );
                        const items = await res.json();

                        if (!items || items.length === 0) {
                            recommendedContainer.innerHTML =
                                "<p>No recommendations yet.</p>";
                            return;
                        }

                        const list = document.createElement("ul");
                        list.style.listStyle = "none";
                        list.style.padding = "0";
                        items.forEach((item) => {
                            list.innerHTML += `<li style="margin-bottom: 0.75rem;"><a href="${item.url}" target="_blank">${item.title}</a></li>`;
                        });
                        recommendedContainer.appendChild(list);
                    } catch (error) {
                        showError(
                            `Error loading recommendations: ${error.message}`,
                        );
                    }
                };

                // --- Initialize Everything ---
                renderBenchmarks();
                loadBlogPosts();
                loadLearnings();
                loadRecommendations();
            });
        </script>
    </body>
</html>
